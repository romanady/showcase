{% extends 'base.html.twig' %}

{% block title %}Movie index{% endblock %}

{% block body %}
    {#
    Parameters:
      * nbPages (int): number of pages
      * currentPage (int): current pages
      * url (string): route name & query (string): route parameter
        ex: list/page-5?q=myFilter (5 = page and query = myFilter)
#}
    {% set nbPages = '5' %}
    {% set currentPage = '1' %}
    {% set url = 'movie_index' %}
    {% if nbPages > 1 %}

        {# Number of page around current page+1 #}
        {% set nearbyPagesLimit = 4 %}

        <div>
            <ul class="pagination">
                {% if currentPage != 1 %}
                    <li>
                        <a href="{{ path(url, { 'page': 1 }) }}">First</a>
                    </li>
                {% endif %}
                {% for i in 1..nbPages %}
                    {% if 0 == (currentPage - nearbyPagesLimit) - loop.index %} {# dot before #}
                        <li class="disabled"><a href="#">...</a></li>
                    {% elseif 0 == (currentPage + nearbyPagesLimit) - loop.index %} {# dot after #}
                        <li class="disabled"><a href="#">...</a></li>
                    {% elseif 0 < (currentPage - nearbyPagesLimit) - loop.index %} {# hide all before #}
                    {% elseif 0 > (currentPage + nearbyPagesLimit) - loop.index %} {# hide all after #}
                    {% else %}
                        <li {% if currentPage == loop.index  %} class="active"{% endif %}>
                            <a href="{{ path(url, { 'page': loop.index }) }}">{{ loop.index }}</a>
                        </li>
                    {% endif %}
                {% endfor %}
                {% if currentPage != nbPages %}
                    <li>
                        <a href="{{ path(url, { 'page': nbPages }) }}">Last</a>
                    </li>
                {% endif %}
            </ul>
        </div>
    {% endif %}
    <h1>Movie index</h1>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Id</th>
                <th>Body</th>
                <th>CardImages</th>
                <th>Cast</th>
                <th>Cert</th>
                <th>Class</th>
                <th>Directors</th>
                <th>Duration</th>
                <th>Genres</th>
                <th>Headline</th>
                <th>KeyArtImages</th>
                <th>LastUpdated</th>
                <th>Quote</th>
                <th>Rating</th>
                <th>ReviewAuthor</th>
                <th>SkyGoId</th>
                <th>SkyGoUrl</th>
                <th>Sum</th>
                <th>Synopsis</th>
                <th>Url</th>
                <th>Videos</th>
                <th>ViewingWindow</th>
                <th>Year</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for movie in movies %}
            <tr>
                <td>{{ movie.id }}</td>
                <td>{{ movie.body }}</td>
                <td>{{ movie.cardImages }}</td>
                <td>{{ movie.cast }}</td>
                <td>{{ movie.cert }}</td>
                <td>{{ movie.class }}</td>
                <td>{{ movie.directors }}</td>
                <td>{{ movie.duration }}</td>
                <td>{{ movie.genres }}</td>
                <td>{{ movie.headline }}</td>
                <td>{{ movie.keyArtImages }}</td>
                <td>{{ movie.lastUpdated }}</td>
                <td>{{ movie.quote }}</td>
                <td>{{ movie.rating }}</td>
                <td>{{ movie.reviewAuthor }}</td>
                <td>{{ movie.skyGoId }}</td>
                <td>{{ movie.skyGoUrl }}</td>
                <td>{{ movie.sum }}</td>
                <td>{{ movie.synopsis }}</td>
                <td>{{ movie.url }}</td>
                <td>{{ movie.videos }}</td>
                <td>{{ movie.viewingWindow }}</td>
                <td>{{ movie.year }}</td>
                <td>
                    <a href="{{ path('movie_show', {'id': movie.id}) }}">show</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="24">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

{% endblock %}
